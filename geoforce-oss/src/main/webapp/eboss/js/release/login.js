var urls={};urls.server="http://192.168.15.174/egispboss";urls.user={};urls.user.server=urls.server+"/userService?";urls.user.add=urls.user.server+"method=addUser&callbacks=?";urls.user.search=urls.user.server+"method=queryUserList&callbacks=?";urls.user.update=urls.user.server+"method=updateUser&callbacks=?";urls.user.remove=urls.user.server+"method=deleteUserInfo&callbacks=?";urls.user.detail=urls.user.server+"method=queryUserInfo&callbacks=?";urls.product={};urls.product.server=urls.server+"/moduleService?";urls.product.add=urls.product.server+"method=addModule&callbacks=?";urls.product.search=urls.product.server+"method=queryServiceList&callbacks=?";urls.product.update=urls.product.server+"method=updateModule&callbacks=?";urls.product.detail=urls.product.server+"method=queryModule&callbacks=?";urls.product.remove=urls.product.server+"method=deleteModule&callbacks=?";urls.order={};urls.order.server=urls.server+"/orderService?";urls.order.add=urls.order.server+"method=addOrder&callbacks=?";urls.order.search=urls.order.server+"method=queryOrderList&callbacks=?";urls.order.detail=urls.order.server+"method=queryOrderDetails&callbacks=?";urls.order.audit=urls.order.server+"method=auditOrder&callbacks=?";urls.order.remove=urls.order.server+"method=deleteOrder&callbacks=?";urls.order.update=urls.order.server+"method=updateOrder&callbacks=?";urls.order.itemupdate=urls.order.server+"method=updateOrderItem&callbacks=?";urls.order.itemremove=urls.order.server+"method=deleteOrderItem&callbacks=?";urls.permission={};urls.permission.server=urls.server+"/privilegeService?";urls.permission.add=urls.permission.server+"method=addPrivilege&callbacks=?";urls.permission.search=urls.permission.server+"method=queryPrivilegeList&callbacks=?";urls.permission.detail=urls.permission.server+"method=queryPrivilegeDetail&callbacks=?";urls.permission.update=urls.permission.server+"method=updatePrivilege&callbacks=?";urls.permission.remove=urls.permission.server+"method=deletePrivilege&callbacks=?";urls.role={};urls.role.server=urls.server+"/roleService?";urls.role.add=urls.role.server+"method=addRole&callbacks=?";urls.role.search=urls.role.server+"method=queryRoleList&callbacks=?";urls.role.update=urls.role.server+"method=updateRole&callbacks=?";urls.role.addper=urls.role.server+"method=addPrivileges&callbacks=?";urls.role.delper=urls.role.server+"method=removePrivileges&callbacks=?";urls.role.updateper=urls.role.server+"method=addOrRmPrivileges&callbacks=?";urls.role.remove=urls.role.server+"method=deleteRole&callbacks=?";urls.employee={};urls.employee.server=urls.server+"/staffService?";urls.employee.add=urls.employee.server+"method=addStaff&callbacks=?";urls.employee.search=urls.employee.server+"method=queryStaffList&callbacks=?";urls.employee.detail=urls.employee.server+"method=queryStaffDetail&callbacks=?";urls.employee.update=urls.employee.server+"method=updateStaff&callbacks=?";urls.employee.updatepwd=urls.employee.server+"method=changePassword&callbacks=?";urls.employee.updaterole=urls.employee.server+"method=addOrRmRoles&callbacks=?";urls.employee.login=urls.employee.server+"method=login&callbacks=?";urls.employee.remove=urls.employee.server+"method=deleteStaff&callbacks=?";var pageSize=10;var user={};user.permissions=[];String.prototype.trim=function(){return this.replace(/(^\s*)|(\s*$)/g,"")};function getWindowHeight(){if(navigator.appName=="Microsoft Internet Explorer"){return document.compatMode=="CSS1Compat"?document.documentElement.clientHeight:document.body.clientHeight}else{return self.innerHeight}}function getWindowWidth(){if(navigator.appName=="Microsoft Internet Explorer"){return document.compatMode=="CSS1Compat"?document.documentElement.clientWidth:document.body.clientWidth}else{return self.innerWidth}}var timer_popup=null;function showPopover(a){$("#popover_content").html(a);$("#popover_result").css("display","block");if(timer_popup){clearTimeout(timer_popup)}timer_popup=setTimeout("hidePopover();",3500)}function hidePopover(){if(timer_popup){clearTimeout(timer_popup)}$("#popover_result").css("display","none")}function showMaskLoading(){$(".overlay").css({display:"block",opacity:"0.8"});$(".loadingbox").stop(true).animate({"margin-top":"300px",opacity:"1"},200)}function hideMaskLoading(){$(".loadingbox").stop(true).animate({"margin-top":"250px",opacity:"0"},400);$(".overlay").css({display:"none",opacity:"0"})}jQuery.cookie=function(b,j,m){if(typeof j!="undefined"){m=m||{};if(j===null){j="";m.expires=-1}var e="";if(m.expires&&(typeof m.expires=="number"||m.expires.toUTCString)){var f;if(typeof m.expires=="number"){f=new Date();f.setTime(f.getTime()+(m.expires*24*60*60*1000))}else{f=m.expires}e="; expires="+f.toUTCString()}var l=m.path?"; path="+m.path:"";var g=m.domain?"; domain="+m.domain:"";var a=m.secure?"; secure":"";document.cookie=[b,"=",encodeURIComponent(j),e,l,g,a].join("")}else{var d=null;if(document.cookie&&document.cookie!=""){var k=document.cookie.split(";");for(var h=0;h<k.length;h++){var c=jQuery.trim(k[h]);if(c.substring(0,b.length+1)==(b+"=")){d=decodeURIComponent(c.substring(b.length+1));break}}}return d}};function createHeader(){var a="";a+='<div class="inner">';a+="   <>";a+="</div>"}function setPage(k,b,h){var e=pageSize;var g="";var a=Math.ceil(k/e);if(b==0){g+='<li class="disabled" title="第一页"><a href="javascript:;">&laquo;</a></li>'}else{g+='<li  title="第一页"><a href="javascript:setpageno('+h+", "+0+');">&laquo;</a></li>'}if(b<3){for(var f=1;(f<=5&&f<=a&&b<=a);f++){if(f!==(b+1)){g+='<li><a href="javascript:setpageno('+h+", "+(f-1)+');">'+f+"</a></li>"}else{g+='<li class="active"><a href="javascript:;">'+f+"</a></li>"}}}else{var j=((a-b>3)?3:a-b);var d=5-j-1;var l=(b-d>0?b-d:1);var c=b+j;for(f=l;f<=c;f++){if(f!==(b+1)){g+='<li><a href="javascript:setpageno('+h+", "+(f-1)+');">'+f+"</a></li>"}else{g+='<li class="active"><a href="javascript:;">'+f+"</a></li>"}}}if(b==(a-1)){g+='<li  title="最后一页" class="disabled"><a href="javascript:;">&raquo;</a></li>'}else{g+='<li  title="最后一页"><a href="javascript:setpageno('+h+", "+(a-1)+');">&raquo;</a></li>'}return g}function setpageno(d,b){var a=$("#"+d);a.attr("page",b);var c=a.attr("data-target");switch(c){case"user":searchUsers();break;case"product":searchProduct();break;case"permission":searchPermissions();break;case"order":searchOrders();break;case"employee":searchEmployees();break;case"role":searchRoles();break;case"key":break;case"userforpopup":getUserListForPopup();break}}function HashMap(){this.size=0;this.entry=new Object();this.put=function(a,b){if(!this.containsKey(a)){this.size++}this.entry[a]=b};this.get=function(a){return this.containsKey(a)?this.entry[a]:null};this.getkey=function(a){for(var b in this.entry){if(this.entry[b]==a){return b}}return null};this.remove=function(a){if(this.containsKey(a)&&(delete this.entry[a])){this.size--}};this.containsKey=function(a){return(a in this.entry)};this.containsValue=function(a){for(var b in this.entry){if(this.entry[b]==a){return true}}return false},this.clear=function(){this.size=0;this.entry={}},this.values=function(){var a=new Array();for(var b in this.entry){a.push(this.entry[b])}return a}}$(function(){initcss();$(window).resize(function(){initcss()});var d=$("#username");var a=$("#password");var b=jQuery.cookie("cookie_egispbossusername");if(b){var c=jQuery.parseJSON(b);$("#checkbox_remember_me").prop("checked",c.checked);if(c.checked){d.val(c.name);a.focus()}else{d.focus()}}else{d.focus()}$("input").placeholder();d.bind("keyup",enter);a.bind("keyup",enter);$("#btn_login").bind("click",login);$("#checkbox_remember_me").change(function(){var f=$(this);var e=f.prop("checked");var g=JSON.stringify({name:d.val(),checked:e});jQuery.cookie("cookie_egispbossusername",g,{path:"/"})})});function initcss(){var a=getWindowHeight();$(".login-content").height(a-48-46-30)}function enter(a){a=a?a:window.event;if(a.keyCode==13){login()}}function login(){var g=$("#username").val();var b=$("#password").val();var d=$(".login-info");if(g===""||g.length===0||g==="输入用户名"){showPopover("用户名不能为空");return}if(b===""||b.length===0||b==="输入密码"){showPopover("密码不能为空");return}var c=$("#checkbox_remember_me").prop("checked");var e="cookie_egispbossusername";var f=JSON.stringify({name:g,checked:c});jQuery.cookie(e,f,{path:"/"});var a=urls.employee.login;d.html("正在登录，请稍候...");$.ajax({type:"GET",async:true,url:a,data:{username:g,password:Base64.encode(b)},dataType:"jsonp",success:function(h){d.html("");if(h&&h.success){location.href="user/"}else{showPopover(h.info)}}})};